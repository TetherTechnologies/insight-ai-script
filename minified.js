const _uid=document.currentScript.getAttribute("_uid"),_tid=document.currentScript.getAttribute("_tid");async function submitMessage(e){const t={data:{content:e,feedbackFilterId:_uid}},i=await fetch(`https://insightai-384106.ts.r.appspot.com/api/tenant/${_tid}/feedback-filter-content`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});await i.json()}function measureTextWidth(e,t,i){var n=document.createElement("span");n.style.fontFamily="Poppins, sans-serif",n.style.fontSize=t,n.style.fontWeight=i,n.style.whiteSpace="nowrap",n.style.position="absolute",n.style.visibility="hidden",n.innerText=e,document.body.appendChild(n);var s=n.offsetWidth;return document.body.removeChild(n),s}var isButtonDisabled=!1,hasSentRepsonse=!1,fontStyle=document.createElement("style");fontStyle.innerHTML="\n@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');\n.chatbox-container * {\n  font-family: 'Poppins', sans-serif !important;\n}\n",document.head.appendChild(fontStyle);var circle=document.createElement("div");circle.style.width="60px",circle.style.height="60px",circle.style.background="linear-gradient(91.8deg, #B825EB 0%, #2563EB 53.65%, #25BBEB 91.15%)",circle.style.borderRadius="50%",circle.style.position="fixed",circle.style.bottom="45px",circle.style.right="45px",circle.style.opacity="1",circle.style.zIndex="900000",circle.style.cursor="pointer",circle.style.transition="all 0.1s ease-in";var svg=document.createElementNS("http://www.w3.org/2000/svg","svg");svg.setAttribute("viewBox","0 0 24 24"),svg.setAttribute("width","30"),svg.setAttribute("height","30"),svg.innerHTML='</g><g><path d="M22,2H2v20l4-4h16V2z M13.57,11.57L12,15l-1.57-3.43L7,10l3.43-1.57L12,5l1.57,3.43L17,10L13.57,11.57z"/></g>';for(var paths=svg.getElementsByTagName("path"),i=0;i<paths.length;i++)paths[i].setAttribute("fill","#ffffff");svg.style.position="absolute",svg.style.top="50%",svg.style.left="50%",svg.style.transform="translate(-50%, -50%) rotate(-10deg)",svg.style.transition="opacity 0.2s ease-out",circle.appendChild(svg);var aboveDiv=document.createElement("div");aboveDiv.id="chatbox-above-div";var chatBoxStyle=document.createElement("style");aboveDiv.style.width="450px",aboveDiv.style.height="550px",aboveDiv.style.background="white",aboveDiv.style.position="fixed",aboveDiv.style.zIndex="800000",aboveDiv.style.display="none",aboveDiv.style.flexDirection="column",aboveDiv.style.alignItems="center",aboveDiv.style.justifyContent="space-between",aboveDiv.classList.add("chatbox-container"),aboveDiv.style.borderRadius="9px",aboveDiv.style.boxShadow="0px 4px 8px rgba(0, 0, 0, 0.4)",aboveDiv.style.transition="opacity 0.3s ease-out, transform 0.1s ease-out",aboveDiv.style.opacity="0",aboveDiv.style.transform="scale(0.95)",aboveDiv.style.textAlign="center";var circleRect=circle.getBoundingClientRect();aboveDiv.style.top=circleRect.top-parseFloat(aboveDiv.style.height)-10+"px",aboveDiv.style.left=circleRect.right-parseFloat(aboveDiv.style.width)+"px",document.body.appendChild(aboveDiv);var headerDiv=document.createElement("div");headerDiv.style.width="100%",headerDiv.style.height="60px",headerDiv.style.background="linear-gradient(91.8deg, #B825EB 0%, #2563EB 53.65%, #25BBEB 91.15%)",headerDiv.style.position="relative",headerDiv.style.borderTopLeftRadius="9px",headerDiv.style.borderTopRightRadius="9px",aboveDiv.appendChild(headerDiv);var messageList=document.createElement("div");messageList.style.width="100%",messageList.style.flexGrow="1",messageList.style.background="white",messageList.style.maxHeight="400px",messageList.style.padding="20px",messageList.style.overflowY="auto",aboveDiv.appendChild(messageList);const initialMessage=document.createElement("div");initialMessage.style.display="flex",initialMessage.style.alignItems="center",initialMessage.style.width="75%",initialMessage.style.marginBottom="10px";var icon=document.createElementNS("http://www.w3.org/2000/svg","svg");icon.setAttribute("viewBox","0 0 24 24"),icon.setAttribute("width","20"),icon.setAttribute("height","20"),icon.style.marginRight="10px",icon.innerHTML='<path d="M22.4822 10.9607L12.0795 0.558989C11.7708 0.250268 11.2702 0.250268 10.9615 0.558989L0.558796 10.9607C0.250047 11.2694 0.250047 11.77 0.558796 12.0787L10.9615 22.4804C11.2702 22.7891 11.7708 22.7891 12.0795 22.4804L22.4822 12.0787C22.791 11.77 22.791 11.2694 22.4822 10.9607Z" fill="#2563EB"/>',icon.style.width="10%";const message=document.createElement("div");message.style.flex="1",message.style.padding="10px",message.style.borderRadius="10px",message.style.backgroundColor="#2563EB",message.style.color="white",message.style.fontSize="14px",message.style.textAlign="left",message.innerText="Please provide any feedback to help us improve our product! ðŸ˜Š",initialMessage.appendChild(icon),initialMessage.appendChild(message),messageList.insertBefore(initialMessage,messageList.firstChild);var inputDiv=document.createElement("div");inputDiv.style.width="90%",inputDiv.style.minHeight="50px",inputDiv.style.display="flex",inputDiv.style.justifyContent="space-between",inputDiv.style.flexDirection="row",inputDiv.style.borderTop="2px solid #ECECEC",inputDiv.style.background="white",aboveDiv.appendChild(inputDiv);var textArea=document.createElement("textarea");textArea.style.width="100%",textArea.style.minHeight="100%",textArea.style.resize="none",textArea.style.background="white",textArea.style.fontSize="14px",textArea.style.overflow="hidden",textArea.style.border="none",textArea.style.outline="none",textArea.style.padding="10px",textArea.style.height="auto",textArea.placeholder="Type your feedback here...",textArea.maxLength=300,inputDiv.appendChild(textArea),chatBoxStyle.innerHTML="\n\n#chatbox-above-div textarea {\n  outline: none !important;\n}\n#chatbox-above-div textarea:focus {\n    all: initial; \n}\n#chatbox-above-div a {\n  text-decoration: none !important;\n}\n",document.head.appendChild(chatBoxStyle);var buttonContainer=document.createElement("div");buttonContainer.style.display="flex",buttonContainer.style.flexDirection="column",buttonContainer.style.alignItems="flex-end",buttonContainer.style.paddingLeft="20px",buttonContainer.style.justifyContent="flex-start",buttonContainer.style.marginTop="10px";var buttonForInput=document.createElement("button");buttonForInput.style.display="inline-block",buttonForInput.style.backgroundColor="#2563EB",buttonForInput.style.fontFamily="Poppins, sans-serif",buttonForInput.style.fontWeight="600",buttonForInput.style.fontSize="14px",buttonForInput.style.borderRadius="20px",buttonForInput.style.color="white",buttonForInput.style.border="none",buttonForInput.style.outline="none",buttonForInput.style.boxShadow="none",buttonForInput.style.cursor="pointer",buttonForInput.style.padding="6px 14px",buttonForInput.style.opacity="1",buttonForInput.style.transition="opacity 0.3s ease",buttonForInput.innerText="Send";var charactersRemainingLabel=document.createElement("label");charactersRemainingLabel.style.fontFamily="'Poppins', sans-serif",charactersRemainingLabel.style.fontSize="12px",charactersRemainingLabel.style.color="#7f95ab",charactersRemainingLabel.style.display="inline-block",charactersRemainingLabel.style.marginTop="5px",charactersRemainingLabel.style.marginBottom="5px",charactersRemainingLabel.innerText="300",buttonContainer.appendChild(buttonForInput),inputDiv.appendChild(buttonContainer);var headerText=document.createElement("span");headerText.innerText="Help us improve!",headerText.style.fontFamily="'Poppins', sans-serif",headerText.style.fontSize="16px",headerText.style.fontWeight="600",headerText.style.color="#ffffff",headerText.style.position="absolute",headerText.style.top="50%",headerText.style.left="50%",headerText.style.transform="translate(-50%, -50%)",headerDiv.appendChild(headerText);var footer=document.createElement("div");footer.style.width="100%",footer.style.height="30px",footer.style.background="white",footer.style.display="flex",footer.style.justifyContent="center",footer.style.paddingLeft="10px",footer.style.paddingRight="10px",footer.style.alignItems="center",footer.style.borderBottomLeftRadius="9px",footer.style.borderBottomRightRadius="9px";var footerText=document.createElement("a");function addMessage(e){var t=document.createElement("div");t.style.wordBreak="break-word",t.style.fontSize="14px",t.style.marginBottom="10px",t.style.width="100%",t.style.display="flex",t.style.flexDirection="row",t.style.justifyContent="flex-end";var i=document.createElement("div");i.style.padding="10px",i.style.wordBreak="break-word",i.style.fontSize="14px",i.style.textAlign="left",i.style.maxWidth="75%",i.style.color="black",i.style.background="#E7E7E7",i.style.borderRadius="10px",i.textContent=e,t.appendChild(i),messageList.appendChild(t),messageList.scrollTop=t.scrollHeight}function handleMessageSend(){var e=textArea.value.trim();e.length>0&&(addMessage(e,"user"),textArea.value="",textArea.style.height="auto",charactersRemainingLabel.innerText=300,submitMessage(e),hasSentRepsonse||(hasSentRepsonse=!0,setTimeout((()=>{const e=document.createElement("div");e.style.display="flex",e.style.alignItems="center",e.style.width="75%",e.style.marginBottom="10px";var t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("viewBox","0 0 24 24"),t.setAttribute("width","20"),t.setAttribute("height","20"),t.style.marginRight="10px",t.innerHTML='<path d="M22.4822 10.9607L12.0795 0.558989C11.7708 0.250268 11.2702 0.250268 10.9615 0.558989L0.558796 10.9607C0.250047 11.2694 0.250047 11.77 0.558796 12.0787L10.9615 22.4804C11.2702 22.7891 11.7708 22.7891 12.0795 22.4804L22.4822 12.0787C22.791 11.77 22.791 11.2694 22.4822 10.9607Z" fill="#2563EB"/>',t.style.width="10%";const i=document.createElement("div");i.style.flex="1",i.style.padding="10px",i.style.borderRadius="10px",i.style.backgroundColor="#2563EB",i.style.color="white",i.style.fontSize="14px",i.style.textAlign="left",i.innerText="ðŸŽ‰Thank you for your feedback! ",e.appendChild(t),e.appendChild(i),messageList.appendChild(e,messageList.firstChild)}),3e3)))}footerText.innerText="Powered by Insight Ai",footerText.style.fontFamily="'Poppins', sans-serif",footerText.style.fontSize="12px",footerText.style.fontWeight="400",footerText.style.color="#2563EB",footerText.target="_blank",footerText.href="https://www.insightai.com.au",footer.appendChild(footerText),headerDiv.appendChild(headerText),aboveDiv.appendChild(footer),circle.addEventListener("mouseenter",(function(){circle.style.opacity="1",svg.style.opacity="1"})),circle.addEventListener("mouseleave",(function(){circle.style.opacity="1",svg.style.opacity="1"})),circle.addEventListener("mousedown",(function(){circle.style.transform="scale(0.95)"})),circle.addEventListener("mouseup",(function(){circle.style.transform="scale(1)"})),buttonForInput.addEventListener("click",(function(){handleMessageSend()})),buttonForInput.addEventListener("mouseover",(function(){buttonForInput.style.opacity="0.8"})),buttonForInput.addEventListener("mouseout",(function(){buttonForInput.style.opacity="1"})),textArea.addEventListener("input",(function(){var e=300-textArea.value.length;charactersRemainingLabel.innerText=e})),textArea.addEventListener("keydown",(function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),handleMessageSend())}));var isCross=!1;circle.addEventListener("click",(function(){if(!isButtonDisabled)if(isButtonDisabled=!0,isCross){svg.innerHTML='</g><g><path d="M22,2H2v20l4-4h16V2z M13.57,11.57L12,15l-1.57-3.43L7,10l3.43-1.57L12,5l1.57,3.43L17,10L13.57,11.57z"/></g>';for(var e=svg.getElementsByTagName("path"),t=0;t<e.length;t++)e[t].setAttribute("fill","#ffffff");svg.style.transform="translate(-50%, -50%) rotate(-10deg)",aboveDiv.style.opacity="0",aboveDiv.style.transform="scale(0.95)",setTimeout((function(){aboveDiv.style.display="none",isButtonDisabled=!1}),300),isCross=!1}else{svg.innerHTML='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/>',svg.getElementsByTagName("path")[1].setAttribute("fill","#ffffff"),svg.style.transform="translate(-50%, -50%)",aboveDiv.style.display="flex",setTimeout((function(){aboveDiv.style.opacity="1",aboveDiv.style.transform="scale(1)",isButtonDisabled=!1}),10);var i=circle.getBoundingClientRect();aboveDiv.style.top=i.top-parseFloat(aboveDiv.style.height)-10+"px",aboveDiv.style.left=i.right-parseFloat(aboveDiv.style.width)+"px",isCross=!0}})),document.body.appendChild(circle);
